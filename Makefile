# =====================================================================================================================
# Cluster creation and Flux deployment.
# =====================================================================================================================
cluster:
	k3d cluster create --agents 2 gitops

destroy:
	k3d cluster delete gitops

install-flux:
	./scripts/flux-init.sh

# =====================================================================================================================
# Docker specific tasks
# =====================================================================================================================

# =====================================================================================================================
# Kubernetes / Kustomize specific tasks.
# =====================================================================================================================

test-%:
	mkdir -p _test
	kustomize build kustomize/$* > _test/$*.yaml
	@echo
	@echo The output can be found at _test/$*.yaml